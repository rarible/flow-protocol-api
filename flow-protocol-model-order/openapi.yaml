openapi: 3.0.3
info:
  title: flow-protocol-model-order
  version: v0.1
paths:
components:
  schemas:

    FlowOrder:
      type: object
      required:
        - id
        - itemId
        - collection
        - amount
        - amountUsd
        - maker
        - make
        - take
        - data
        - fill
        - cancelled
        - createdAt
        - lastUpdateAt
        - makeStock
      properties:
        id:
          type: integer
          format: int64
        itemId:
          type: string
        collection:
          $ref: "#/components/schemas/FlowContract"
        maker:
          $ref: "#/components/schemas/FlowAddress"
        taker:
          $ref: "#/components/schemas/FlowAddress"
        make:
          $ref: "#/components/schemas/FlowAsset"
        take:
          $ref: "#/components/schemas/FlowAsset"
        data:
          $ref: "#/components/schemas/FlowOrderData"
        fill:
          $ref: "#/components/schemas/BigDecimal"
        cancelled:
          type: boolean
        createdAt:
          type: string
          format: date-time
        lastUpdateAt:
          type: string
          format: date-time
        amount:
          $ref: "#/components/schemas/BigDecimal"
        offeredNftId:
          type: string
        priceUsd:
          $ref: "#/components/schemas/BigDecimal"
        makeStock:
          $ref: "#/components/schemas/BigInteger"
        start:
          type: string
          format: date-time
        end:
          type: string
          format: date-time

    FlowOrderEvent:
      type: object
      required:
        - eventId
        - orderId
      properties:
        eventId:
          type: string
        orderId:
          type: string
      oneOf:
        - $ref: "#/components/schemas/FlowOrderUpdateEvent"

    FlowOrderUpdateEvent:
      type: object
      required:
        - order
        - "@type"
      properties:
        "@type":
          type: string
          enum:
            - UPDATE
        order:
          $ref: "#/components/schemas/FlowOrder"

    FlowOrderData:
      type: object
      required:
        - payouts
        - originalFees
      properties:
        payouts:
          type: array
          items:
            $ref: "#/components/schemas/PayInfo"
        originalFees:
          type: array
          items: 
            $ref: "#/components/schemas/PayInfo"

    FlowAggregationData:
      type: object
      required:
        - address
        - sum
        - count
      properties:
        address:
          $ref: "#/components/schemas/FlowAddress"
        sum:
          $ref: "#/components/schemas/BigDecimal"
        count:
          type: integer
          format: int64
